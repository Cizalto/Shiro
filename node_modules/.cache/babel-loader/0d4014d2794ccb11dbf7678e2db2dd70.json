{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/cizalto/Bureau/git/epitech/IRC/T-JSF-600-LYN-6-1-IRCjavascript-antoine.dupuis/irc/src/Main.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Channels from './components/Channels';\nimport Body from './components/Body';\nimport JoinModal from './components/JoinModal';\nimport { socket, join, joinWithAuth } from './API/Api'; // class Main extends React.Component {\n//   constructor(props){\n//     super(props)\n//     this.state = {name: null};\n//   }\n\nfunction Main(props) {\n  _s();\n\n  const [name, setName] = useState(null);\n  const [loggedIn, setLog] = useState(false);\n  const [msg, setMsg] = useState(\"\");\n  const [history, setHistory] = useState([{\n    content: \"Start of the history.\",\n    sender: 'server',\n    timeStamp: getTimestamp()\n  }]);\n  const [userInput, setInput] = useState();\n  const [userList, setUserList] = useState();\n  const [firstLaunch, setFirst] = useState(false);\n\n  function updateScroll() {\n    var element = document.getElementsByClassName(\"content\");\n    element.scrollTop = element.scrollHeight;\n  }\n\n  function getTimestamp() {\n    const options = {\n      timeZone: \"Etc/GMT-1\",\n      hour12: false,\n      hour: \"numeric\",\n      minute: \"numeric\",\n      seconds: \"numeric\"\n    };\n    return new Date().toLocaleTimeString(\"fr-FR\", options);\n  } // ---------------------------------------------------------------|| Functions to display messages and get Infos ||\n\n\n  useEffect(() => {\n    console.log(\"useEffect triggered\");\n\n    if (!firstLaunch && loggedIn) {\n      socket.on(\"room-history\", dataObj => {\n        console.log(\"here's\", dataObj.content.name, \"history:\", dataObj.content.history);\n        setHistory(historyCpy => [...historyCpy, ...dataObj.content.history]);\n      });\n      socket.on(\"update-userList\", userList => {\n        console.log(\"Here's the userList:\", userList);\n        setUserList(userList);\n        updateScroll();\n      });\n      socket.on('getroomlist', roomList => {\n        console.log(roomList);\n      });\n      socket.on(\"update\", msgObj => {\n        displayUpdate(msgObj);\n      });\n      socket.on(\"chat\", msgObj => {\n        console.log(\"Here's the message Obj:\", msgObj);\n        setHistory(historyCpy => [...historyCpy, msgObj]);\n        updateScroll();\n      });\n      socket.on(\"rick\", () => {\n        var audio = new Audio('http://epitech.justmeandi.net/music/music.mp3');\n        audio.play();\n      });\n      setFirst(true);\n    }\n\n    function displayUpdate(msgObj) {\n      setHistory(historyCpy => [...historyCpy, msgObj]);\n    }\n  }, [history, loggedIn]); // ---------------------------------------------------------------|| End ||\n  // ---------------------------------------------------------------|| Functions to join the server ||\n\n  function joinServer(userName, room) {\n    console.info(\"Attempting to Join the chat as\", userName);\n    setName(userName);\n    join(userName, room);\n    setLog(true);\n  }\n\n  function joinServerWithAuth(userName, password, room) {\n    console.info(\"Attempting to Join the chat as\", userName);\n    setName(userName);\n    joinWithAuth(userName, password, room);\n    socket.once(\"success\", () => {\n      console.log(\"-- Connection successful --\");\n      setLog(true);\n    });\n    socket.once(\"noaccount\", () => {\n      console.log(\"-- No account found --\");\n      socket.disconnect();\n    });\n    console.log(userName);\n    socket.emit('join', userName, room);\n  } // ---------------------------------------------------------------|| End ||\n\n\n  if (loggedIn) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main\",\n      children: [/*#__PURE__*/_jsxDEV(Channels, {\n        soc: socket,\n        history: history,\n        userList: userList\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"menu\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Title\",\n          children: \"Connected Users\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main\",\n      children: /*#__PURE__*/_jsxDEV(JoinModal, {\n        joinAs: joinServer,\n        joinWithAuth: joinServerWithAuth\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }, this);\n  }\n}\n\n_s(Main, \"iQm6NVO/Lz5P1tefZlnyGSnXYg0=\");\n\n_c = Main;\nexport default Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"sources":["/home/cizalto/Bureau/git/epitech/IRC/T-JSF-600-LYN-6-1-IRCjavascript-antoine.dupuis/irc/src/Main.js"],"names":["React","useState","useEffect","Channels","Body","JoinModal","socket","join","joinWithAuth","Main","props","name","setName","loggedIn","setLog","msg","setMsg","history","setHistory","content","sender","timeStamp","getTimestamp","userInput","setInput","userList","setUserList","firstLaunch","setFirst","updateScroll","element","document","getElementsByClassName","scrollTop","scrollHeight","options","timeZone","hour12","hour","minute","seconds","Date","toLocaleTimeString","console","log","on","dataObj","historyCpy","roomList","msgObj","displayUpdate","audio","Audio","play","joinServer","userName","room","info","joinServerWithAuth","password","once","disconnect","emit"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAAyBC,SAAzB,QAA0C,OAA1C;AACA,OAAO,WAAP;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,SAASC,MAAT,EAAgBC,IAAhB,EAAqBC,YAArB,QAAwC,WAAxC,C,CAGA;AACA;AACA;AACA;AACA;;AAEA,SAASC,IAAT,CAAeC,KAAf,EAAqB;AAAA;;AACnB,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBX,QAAQ,CAAC,IAAD,CAAhC;AACA,QAAM,CAACY,QAAD,EAAWC,MAAX,IAAqBb,QAAQ,CAAC,KAAD,CAAnC;AACA,QAAM,CAACc,GAAD,EAAMC,MAAN,IAAgBf,QAAQ,CAAC,EAAD,CAA9B;AACA,QAAM,CAACgB,OAAD,EAAUC,UAAV,IAAwBjB,QAAQ,CAAC,CAAC;AAACkB,IAAAA,OAAO,EAAE,uBAAV;AAAkCC,IAAAA,MAAM,EAAE,QAA1C;AAAoDC,IAAAA,SAAS,EAAEC,YAAY;AAA3E,GAAD,CAAD,CAAtC;AACA,QAAM,CAACC,SAAD,EAAYC,QAAZ,IAAwBvB,QAAQ,EAAtC;AACA,QAAM,CAACwB,QAAD,EAAWC,WAAX,IAA0BzB,QAAQ,EAAxC;AACA,QAAM,CAAC0B,WAAD,EAAcC,QAAd,IAA0B3B,QAAQ,CAAC,KAAD,CAAxC;;AAEA,WAAS4B,YAAT,GAAuB;AACrB,QAAIC,OAAO,GAAGC,QAAQ,CAACC,sBAAT,CAAgC,SAAhC,CAAd;AACAF,IAAAA,OAAO,CAACG,SAAR,GAAoBH,OAAO,CAACI,YAA5B;AACD;;AAED,WAASZ,YAAT,GAAwB;AACtB,UAAMa,OAAO,GAAG;AACZC,MAAAA,QAAQ,EAAC,WADG;AAEZC,MAAAA,MAAM,EAAG,KAFG;AAGZC,MAAAA,IAAI,EAAG,SAHK;AAIZC,MAAAA,MAAM,EAAE,SAJI;AAIMC,MAAAA,OAAO,EAAC;AAJd,KAAhB;AAMA,WAAO,IAAIC,IAAJ,GAAWC,kBAAX,CAA8B,OAA9B,EAAsCP,OAAtC,CAAP;AACH,GAtBoB,CAwBnB;;;AACAjC,EAAAA,SAAS,CAAC,MAAM;AACdyC,IAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;;AACA,QAAI,CAACjB,WAAD,IAAgBd,QAApB,EAA8B;AAC1BP,MAAAA,MAAM,CAACuC,EAAP,CAAU,cAAV,EAA2BC,OAAD,IAAY;AAClCH,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBE,OAAO,CAAC3B,OAAR,CAAgBR,IAAtC,EAA2C,UAA3C,EAAsDmC,OAAO,CAAC3B,OAAR,CAAgBF,OAAtE;AACAC,QAAAA,UAAU,CAAC6B,UAAU,IAAK,CAAC,GAAGA,UAAJ,EAAgB,GAAGD,OAAO,CAAC3B,OAAR,CAAgBF,OAAnC,CAAhB,CAAV;AACH,OAHD;AAKAX,MAAAA,MAAM,CAACuC,EAAP,CAAU,iBAAV,EAA8BpB,QAAD,IAAc;AACvCkB,QAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAmCnB,QAAnC;AACAC,QAAAA,WAAW,CAACD,QAAD,CAAX;AAEAI,QAAAA,YAAY;AACf,OALD;AAOAvB,MAAAA,MAAM,CAACuC,EAAP,CAAU,aAAV,EAA0BG,QAAD,IAAa;AAClCL,QAAAA,OAAO,CAACC,GAAR,CAAYI,QAAZ;AACH,OAFD;AAIA1C,MAAAA,MAAM,CAACuC,EAAP,CAAU,QAAV,EAAqBI,MAAD,IAAW;AAC3BC,QAAAA,aAAa,CAACD,MAAD,CAAb;AACH,OAFD;AAIA3C,MAAAA,MAAM,CAACuC,EAAP,CAAU,MAAV,EAAmBI,MAAD,IAAY;AAC1BN,QAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAsCK,MAAtC;AACA/B,QAAAA,UAAU,CAAC6B,UAAU,IAAK,CAAC,GAAGA,UAAJ,EAAgBE,MAAhB,CAAhB,CAAV;AAEApB,QAAAA,YAAY;AACf,OALD;AAOAvB,MAAAA,MAAM,CAACuC,EAAP,CAAU,MAAV,EAAkB,MAAM;AACtB,YAAIM,KAAK,GAAG,IAAIC,KAAJ,CAAU,+CAAV,CAAZ;AACAD,QAAAA,KAAK,CAACE,IAAN;AACH,OAHC;AAKAzB,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACH;;AACD,aAASsB,aAAT,CAAuBD,MAAvB,EAA8B;AAC1B/B,MAAAA,UAAU,CAAC6B,UAAU,IAAK,CAAC,GAAGA,UAAJ,EAAgBE,MAAhB,CAAhB,CAAV;AACH;AAGJ,GA1CU,EA0CR,CAAChC,OAAD,EAAUJ,QAAV,CA1CQ,CAAT,CAzBmB,CAoEnB;AAGA;;AACA,WAASyC,UAAT,CAAqBC,QAArB,EAA+BC,IAA/B,EAAoC;AAClCb,IAAAA,OAAO,CAACc,IAAR,CAAa,gCAAb,EAA+CF,QAA/C;AACA3C,IAAAA,OAAO,CAAC2C,QAAD,CAAP;AACAhD,IAAAA,IAAI,CAACgD,QAAD,EAAWC,IAAX,CAAJ;AACA1C,IAAAA,MAAM,CAAC,IAAD,CAAN;AACD;;AAED,WAAS4C,kBAAT,CAA4BH,QAA5B,EAAsCI,QAAtC,EAAgDH,IAAhD,EAAqD;AACnDb,IAAAA,OAAO,CAACc,IAAR,CAAa,gCAAb,EAA+CF,QAA/C;AACA3C,IAAAA,OAAO,CAAC2C,QAAD,CAAP;AACA/C,IAAAA,YAAY,CAAC+C,QAAD,EAAUI,QAAV,EAAoBH,IAApB,CAAZ;AACAlD,IAAAA,MAAM,CAACsD,IAAP,CAAY,SAAZ,EAAuB,MAAM;AACrBjB,MAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACA9B,MAAAA,MAAM,CAAC,IAAD,CAAN;AACP,KAHD;AAIAR,IAAAA,MAAM,CAACsD,IAAP,CAAY,WAAZ,EAAyB,MAAM;AACvBjB,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACAtC,MAAAA,MAAM,CAACuD,UAAP;AACP,KAHD;AAIAlB,IAAAA,OAAO,CAACC,GAAR,CAAYW,QAAZ;AACAjD,IAAAA,MAAM,CAACwD,IAAP,CAAY,MAAZ,EAAmBP,QAAnB,EAA6BC,IAA7B;AACD,GA7FkB,CA+FnB;;;AAGI,MAAI3C,QAAJ,EAAa;AACX,wBACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA,8BACE,QAAC,QAAD;AAAU,QAAA,GAAG,EAAEP,MAAf;AAAuB,QAAA,OAAO,EAAEW,OAAhC;AAAyC,QAAA,QAAQ,EAAEQ;AAAnD;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAWD,GAZD,MAYM;AACJ,wBACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA,6BACE,QAAC,SAAD;AAAW,QAAA,MAAM,EAAE6B,UAAnB;AAA+B,QAAA,YAAY,EAAEI;AAA7C;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF;AAKD;AACN;;GArHQjD,I;;KAAAA,I;AAuHT,eAAeA,IAAf","sourcesContent":["import React, { useState,useEffect } from 'react';\nimport './App.css';\nimport Channels from './components/Channels';\nimport Body from './components/Body';\nimport JoinModal from './components/JoinModal';\nimport { socket,join,joinWithAuth} from './API/Api';\n\n\n// class Main extends React.Component {\n//   constructor(props){\n//     super(props)\n//     this.state = {name: null};\n//   }\n\nfunction Main (props){\n  const [name, setName] = useState(null);\n  const [loggedIn, setLog] = useState(false);\n  const [msg, setMsg] = useState(\"\");\n  const [history, setHistory] = useState([{content: \"Start of the history.\",sender: 'server', timeStamp: getTimestamp()}]);\n  const [userInput, setInput] = useState();\n  const [userList, setUserList] = useState();\n  const [firstLaunch, setFirst] = useState(false);\n\n  function updateScroll(){\n    var element = document.getElementsByClassName(\"content\");\n    element.scrollTop = element.scrollHeight;\n  }\n\n  function getTimestamp() {\n    const options = {\n        timeZone:\"Etc/GMT-1\",\n        hour12 : false,\n        hour:  \"numeric\",\n        minute: \"numeric\",seconds:\"numeric\"\n    }\n    return new Date().toLocaleTimeString(\"fr-FR\",options)\n}\n\n  // ---------------------------------------------------------------|| Functions to display messages and get Infos ||\n  useEffect(() => {\n    console.log(\"useEffect triggered\");\n    if (!firstLaunch && loggedIn) {\n        socket.on(\"room-history\", (dataObj) =>{\n            console.log(\"here's\", dataObj.content.name,\"history:\",dataObj.content.history);\n            setHistory(historyCpy => ([...historyCpy, ...dataObj.content.history]))\n        })\n\n        socket.on(\"update-userList\", (userList) => {\n            console.log(\"Here's the userList:\",userList);\n            setUserList(userList)\n\n            updateScroll();\n        })\n\n        socket.on('getroomlist', (roomList) =>{\n            console.log(roomList);\n        })\n\n        socket.on(\"update\", (msgObj) =>{\n            displayUpdate(msgObj)\n        })\n\n        socket.on(\"chat\", (msgObj) => {\n            console.log(\"Here's the message Obj:\",msgObj);\n            setHistory(historyCpy => ([...historyCpy, msgObj]))\n\n            updateScroll();\n        })\n\n        socket.on(\"rick\", () => {\n          var audio = new Audio('http://epitech.justmeandi.net/music/music.mp3');\n          audio.play();\n      })\n\n        setFirst(true)\n    }\n    function displayUpdate(msgObj){\n        setHistory(historyCpy => ([...historyCpy, msgObj]))\n    }\n\n\n}, [history, loggedIn])\n  // ---------------------------------------------------------------|| End ||\n\n\n  // ---------------------------------------------------------------|| Functions to join the server ||\n  function joinServer (userName, room){\n    console.info(\"Attempting to Join the chat as\", userName);\n    setName(userName)\n    join(userName, room)\n    setLog(true);\n  }\n  \n  function joinServerWithAuth(userName, password, room){\n    console.info(\"Attempting to Join the chat as\", userName);\n    setName(userName)\n    joinWithAuth(userName,password, room)\n    socket.once(\"success\", () => {\n            console.log(\"-- Connection successful --\");\n            setLog(true);\n    })\n    socket.once(\"noaccount\", () => {\n            console.log(\"-- No account found --\")\n            socket.disconnect()\n    })\n    console.log(userName);\n    socket.emit('join',userName, room)\n  }\n\n  // ---------------------------------------------------------------|| End ||\n\n\n      if (loggedIn){\n        return (\n          <div className=\"main\">\n            <Channels soc={socket} history={history} userList={userList}/>\n            <div className=\"menu\">\n              <div className=\"Title\">\n                Connected Users\n              </div>\n\n            </div>\n          </div>\n        )\n      }else {\n        return (\n          <div className=\"main\">\n            <JoinModal joinAs={joinServer} joinWithAuth={joinServerWithAuth}/>\n          </div>\n        )\n      }\n}\n\nexport default Main;"]},"metadata":{},"sourceType":"module"}